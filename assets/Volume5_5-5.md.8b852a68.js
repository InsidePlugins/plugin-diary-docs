import{_ as o,o as s,c as a,S as n}from"./chunks/framework.7f03344f.js";const y=JSON.parse('{"title":"5-5 音效","description":"","frontmatter":{},"headers":[],"relativePath":"Volume5/5-5.md","filePath":"docs/Volume5/5-5.md","lastUpdated":1698403164000}'),t={name:"Volume5/5-5.md"},e=n(`<h1 id="_5-5-音效" tabindex="-1">5-5 音效 <a class="header-anchor" href="#_5-5-音效" aria-label="Permalink to &quot;5-5 音效&quot;">​</a></h1><p>这里的「音效」指的是 Minecraft 原版音效。</p><div class="info custom-block"><p class="custom-block-title"><img src="data:image/svg+xml,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; viewBox=&#39;0 0 16 16&#39; transform=&#39;scale(0.6)&#39; fill=&#39;%23fff&#39;%3E%3Cpath d=&#39;M9.1 0C10.2 0 10.7 0.7 10.7 1.6 10.7 2.6 9.8 3.6 8.6 3.6 7.6 3.6 7 3 7 2 7 1.1 7.7 0 9.1 0Z&#39;/%3E%3Cpath d=&#39;M5.8 16C5 16 4.4 15.5 5 13.2L5.9 9.1C6.1 8.5 6.1 8.2 5.9 8.2 5.7 8.2 4.6 8.6 3.9 9.1L3.5 8.4C5.6 6.6 7.9 5.6 8.9 5.6 9.8 5.6 9.9 6.6 9.5 8.2L8.4 12.5C8.2 13.2 8.3 13.5 8.5 13.5 8.7 13.5 9.6 13.2 10.4 12.5L10.9 13.2C8.9 15.2 6.7 16 5.8 16Z&#39;/%3E%3C/svg%3E" style="background-color:#0B87DA;clip-path:circle();" width="24px" height="24px"> <strong>插件的局限</strong>？</p><p>有时候我们不得不面对一个现实：<strong>有些东西，即使我们拼尽全力也无法做到</strong>。</p><p>比如，这里音效的限制。虽然我们可以通过建议玩家使用资源包来替换服务器内的一些音效，但却<strong>无法添加单独的音效</strong>。同样，也无法在没有 Mod 支持的情况下进行自定义点歌。</p><p>笔者不准备讲述 Mod 与插件联合开发的方法，因为那样感觉就失去了插件的意义……既然你都用 Mod 了，还用插件做什么呢？</p><p>嗯，就说这么多吧，总之，我们在插件开发时拼尽全力，如果做不到，也不要强求。</p></div><h2 id="播放音效" tabindex="-1">播放音效 <a class="header-anchor" href="#播放音效" aria-label="Permalink to &quot;播放音效&quot;">​</a></h2><p>播放音效和播放粒子效果很像，只不过这次使用的是 <code>World</code> 接口的 <code>playSound</code> 方法。</p><p>下面我们演示如何播放凋灵生成的音效：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-keyword);">World</span><span style="color:var(--shiki-color-text);"> overworld </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Bukkit</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">getWorlds</span><span style="color:var(--shiki-color-text);">()</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">);</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// 主世界</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">Player</span><span style="color:var(--shiki-color-text);"> player </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Objects</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">requireNonNull</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Bukkit</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">getPlayer</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;ThatRarityEG&quot;</span><span style="color:var(--shiki-color-text);">));</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// 随便找个玩家</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">overworld</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">playSound</span><span style="color:var(--shiki-color-text);">(</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">player</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">getLocation</span><span style="color:var(--shiki-color-text);">()</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-comment);">// Location 对象确定位置</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">Sound</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-constant);">ENTITY_WITHER_SPAWN</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-comment);">// 音效</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">SoundCategory</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-constant);">HOSTILE</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-comment);">// 可选，音效分类</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-comment);">// 音量，参考下面的说明</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-comment);">// 播放速度</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">);</span></span></code></pre></div><p>这里有五个参数。</p><ul><li><p><code>Location</code> 是<strong>音源</strong>，表示这个声音是从哪里传来的，Bukkit 用它来计算声音的衰减</p></li><li><p><code>Sound.ENTITY_WITHER_SPAWNED</code> 是<strong>音效</strong>，只能取 <code>Sound</code> 枚举中的一个值，可以参考 <code>Sound</code> 枚举中的内容（查 JavaDocs 或者反编译）</p></li><li><p><code>SoundCategory.HOSTILE</code> 是<strong>音效分类</strong>，是可选的，这可能影响 Bukkit 如何处理该音效，如果不填，Bukkit 将会自动选择合适的分类</p></li><li><p>第一个 <code>1</code> 是<strong>音量</strong>，该音量值乘上玩家客户端的音量值即为最终音量，如果该值（这里设定的音量）超过了 1，音量将被限制在 1 * 「玩家客户端音量值」</p><p>但这个值还会影响<strong>音量衰减</strong>，例如，设置为 1 和 10 都可以让客户端播放玩家允许的最大声音，但设置为 1 的声音在 15 格之外就听不到了，而设置为 10 的在 150 格之内仍然可以被听见，这个距离是与音源的距离</p></li><li><p>第二个 <code>1</code> 是<strong>播放速度</strong>，<code>0.5</code> 为减速至一半，<code>2</code> 为加速一倍，如果不是 <code>1</code> 听上去会有点奇怪，因此不建议修改</p></li></ul><p>那么怎么查到所有的 <code>Sound</code> 呢？除了查 JavaDocs 就没有更好的方法吗？</p><p>当然有！如果你还在 IDEA 中，可以这样做：</p><ol><li><p>先输入 <code>Sound</code>，按 <kbd>Tab</kbd> 自动补全，IDEA 即自动为你导入 <code>Sound</code> 枚举</p></li><li><p>输入一个点（<code>.</code>），IDEA 便会弹出所有可能的值，用上下键选择，按 <kbd>Tab</kbd> 接受</p></li><li><p>如果要进行查找，可以输入值的一部分，例如，如果我想查找凋灵的音效，就应该像这样：</p><p><img src="https://s2.loli.net/2022/04/15/Gv2mqHywRFfjxYB.png" alt="FINDSOUND.png"></p></li></ol><p>Bukkit 对音效的命名很规范，全大写，都是 <code>&lt;类别&gt;_&lt;主体&gt;_&lt;行为&gt;</code>，例如 <code>ENTITY_WITHER_SPAWN</code> 就是「实体 - 凋灵生成」音效。这样应该很方便就能找到需要的声音。</p><p>此外，你还可以通过将第三个参数设置为 <code>SoundCategory.MUSIC</code> 来告知客户端：「正在播放背景音乐哦」。</p><p>这样，客户端应当会暂停原先的背景音乐播放，转而先播放指定的声音。（说「应当」是因为有时候这个参数能够生效，有时候不行）</p><p>而如果没有指定这一点，那么客户端会认为「这是个很短的音效」，就不会暂停。</p><h2 id="借助资源包" tabindex="-1">借助资源包 <a class="header-anchor" href="#借助资源包" aria-label="Permalink to &quot;借助资源包&quot;">​</a></h2><p>我们可以利用资源包来替换 Minecraft 的原版声音。<s>早就该这样了</s></p><p>资源包的制作并不是本教程的一部分，因此我们不详细说明，你可以在 <a href="https://wiki.biligame.com/mc/%E6%95%99%E7%A8%8B/%E5%88%B6%E4%BD%9C%E8%B5%84%E6%BA%90%E5%8C%85#%E5%88%B6%E4%BD%9C%E8%87%AA%E5%AE%9A%E4%B9%89%E9%9F%B3%E4%B9%90" target="_blank" rel="noreferrer">Wiki 上的教程</a> 中找到相关的内容。</p><h2 id="不要依赖声音" tabindex="-1">不要依赖声音 <a class="header-anchor" href="#不要依赖声音" aria-label="Permalink to &quot;不要依赖声音&quot;">​</a></h2><div class="danger custom-block"><p class="custom-block-title"><img src="data:image/svg+xml,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; viewBox=&#39;0 0 16 16&#39; transform=&#39;scale(0.6)&#39; fill=&#39;%23fff&#39;%3E%3Cpath d=&#39;M10 14C10 15.1 9.1 16 8 16 6.9 16 6 15.1 6 14 6 12.9 6.9 12 8 12 9.1 12 10 12.9 10 14Z&#39;/%3E%3Cpath d=&#39;M10 1.6C10 1.2 9.8 0.9 9.6 0.7 9.2 0.3 8.6 0 8 0 7.4 0 6.8 0.2 6.5 0.6 6.2 0.9 6 1.2 6 1.6 6 1.7 6 1.8 6 1.9L6.8 9.6C6.9 9.9 7 10.1 7.2 10.2 7.4 10.4 7.7 10.5 8 10.5 8.3 10.5 8.6 10.4 8.8 10.3 9 10.1 9.1 9.9 9.2 9.6L10 1.9C10 1.8 10 1.7 10 1.6Z&#39;/%3E%3C/svg%3E" style="background-color:#DA0B50;clip-path:circle();" width="24px" height="24px"> <strong>请尊重玩家</strong>！</p><p>声音也许很适合用来渲染环境，但<strong>绝对不适合</strong>用于传递信息！</p><p>很多玩家的游戏环境也许不适合打开声音，玩家的声卡可能没有正常驱动，这都是要考虑到的问题。（我玩 Minecraft 从来都不开声音的）</p><p>另外，过大的资源包可能会被客户端（自动）拒绝下载。</p></div><p>总而言之，<strong>声音只是点缀</strong>。<s>有做声音的功夫还不如改进游戏内容呢</s></p>`,22),l=[e];function p(r,i,c,k,d,h){return s(),a("div",null,l)}const u=o(t,[["render",p]]);export{y as __pageData,u as default};
