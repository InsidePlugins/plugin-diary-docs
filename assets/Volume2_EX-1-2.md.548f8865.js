import{_ as a,o as n,c as e,S as o,k as s}from"./chunks/framework.7f03344f.js";const g=JSON.parse('{"title":"EX-1-2 调试登录插件","description":"","frontmatter":{},"headers":[],"relativePath":"Volume2/EX-1-2.md","filePath":"docs/Volume2/EX-1-2.md","lastUpdated":1698403164000}'),l={name:"Volume2/EX-1-2.md"},t=o(`<h1 id="ex-1-2-调试登录插件" tabindex="-1">EX-1-2 调试登录插件 <a class="header-anchor" href="#ex-1-2-调试登录插件" aria-label="Permalink to &quot;EX-1-2 调试登录插件&quot;">​</a></h1><h2 id="部署插件" tabindex="-1">部署插件 <a class="header-anchor" href="#部署插件" aria-label="Permalink to &quot;部署插件&quot;">​</a></h2><p>进入服务器根目录，删除 <code>plugins</code> 下的 <code>HelloWorld.jar</code>（不想删也可以），把 <code>HarmonyAuth.jar</code> 放进去。</p><h2 id="配置服务器" tabindex="-1">配置服务器 <a class="header-anchor" href="#配置服务器" aria-label="Permalink to &quot;配置服务器&quot;">​</a></h2><p>之前在 EX-1-2 中我们已经学习过如何开启服务端了，但是那时的设定有点偷工减料……其实也没什么，只是进入服务器必须使用正版账号而已。</p><p>因为笔者是有正版账号的（请不要打我，别忘了有《动物保护法》），因此笔者现在在纠结要不要进行这样一个设定……考虑到开发者们可能有的是没有正版账号的，如果因为这个导致插件开发出现困难，那可就不好了，因此笔者还是把关闭正版验证的方法写在这里。</p><p>打开 <code>server.properties</code>（用记事本或者 vim 就好了，不要用 IDEA，杀鸡焉用宰牛刀），它大概像这样：</p><div class="language-properties"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki css-variables has-diff"><code><span class="line"><span style="color:var(--shiki-token-comment);">#Minecraft server properties</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">enable-jmx-monitoring=</span><span style="color:var(--shiki-color-text);">false</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">rcon.port=</span><span style="color:var(--shiki-color-text);">25575</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">level-seed=</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">gamemode=</span><span style="color:var(--shiki-color-text);">survival</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">enable-command-block=</span><span style="color:var(--shiki-color-text);">false</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">enable-query=</span><span style="color:var(--shiki-color-text);">false</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">generator-settings=</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">level-name=</span><span style="color:var(--shiki-color-text);">world</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">motd=</span><span style="color:var(--shiki-color-text);">Dev Server</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">query.port=</span><span style="color:var(--shiki-color-text);">25565</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">pvp=</span><span style="color:var(--shiki-color-text);">true</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">generate-structures=</span><span style="color:var(--shiki-color-text);">true</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">difficulty=</span><span style="color:var(--shiki-color-text);">easy</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">network-compression-threshold=</span><span style="color:var(--shiki-color-text);">256</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">max-tick-time=</span><span style="color:var(--shiki-color-text);">60000</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">use-native-transport=</span><span style="color:var(--shiki-color-text);">true</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">max-players=</span><span style="color:var(--shiki-color-text);">20</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">online-mode=</span><span style="color:var(--shiki-color-text);">true</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">enable-status=</span><span style="color:var(--shiki-color-text);">true</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">allow-flight=</span><span style="color:var(--shiki-color-text);">false</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">broadcast-rcon-to-ops=</span><span style="color:var(--shiki-color-text);">true</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">view-distance=</span><span style="color:var(--shiki-color-text);">4</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">max-build-height=</span><span style="color:var(--shiki-color-text);">256</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">server-ip=</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">allow-nether=</span><span style="color:var(--shiki-color-text);">true</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">server-port=</span><span style="color:var(--shiki-color-text);">25565</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">enable-rcon=</span><span style="color:var(--shiki-color-text);">false</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">sync-chunk-writes=</span><span style="color:var(--shiki-color-text);">true</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">op-permission-level=</span><span style="color:var(--shiki-color-text);">4</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">prevent-proxy-connections=</span><span style="color:var(--shiki-color-text);">false</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">resource-pack=</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">entity-broadcast-range-percentage=</span><span style="color:var(--shiki-color-text);">100</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">rcon.password=</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">player-idle-timeout=</span><span style="color:var(--shiki-color-text);">0</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">debug=</span><span style="color:var(--shiki-color-text);">false</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">force-gamemode=</span><span style="color:var(--shiki-color-text);">false</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">rate-limit=</span><span style="color:var(--shiki-color-text);">0</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">hardcore=</span><span style="color:var(--shiki-color-text);">false</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">white-list=</span><span style="color:var(--shiki-color-text);">false</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">broadcast-console-to-ops=</span><span style="color:var(--shiki-color-text);">true</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">spawn-npcs=</span><span style="color:var(--shiki-color-text);">true</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">spawn-animals=</span><span style="color:var(--shiki-color-text);">true</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">snooper-enabled=</span><span style="color:var(--shiki-color-text);">true</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">function-permission-level=</span><span style="color:var(--shiki-color-text);">2</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">level-type=</span><span style="color:var(--shiki-color-text);">default</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">text-filtering-config=</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">spawn-monsters=</span><span style="color:var(--shiki-color-text);">true</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">enforce-whitelist=</span><span style="color:var(--shiki-color-text);">false</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">resource-pack-sha1=</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">spawn-protection=</span><span style="color:var(--shiki-color-text);">16</span></span>
<span class="line"><span style="color:var(--shiki-token-keyword);">max-world-size=</span><span style="color:var(--shiki-color-text);">29999984</span></span></code></pre></div><p>我们什么也不管，找到：</p><div class="language-properties"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-keyword);">online-mode=</span><span style="color:var(--shiki-color-text);">true</span></span></code></pre></div><p>改为：</p><div class="language-properties"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-keyword);">online-mode=</span><span style="color:var(--shiki-color-text);">false</span></span></code></pre></div><p>按 <kbd>Ctrl</kbd> + <kbd>S</kbd> 保存。这是就允许了盗版客户端进入服务器。</p><p>使用之前的方法启动服务端，如果你忘了，我再说一遍……在当前目录打开终端，输入：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-color-text);">java -jar &lt;服务端核心名称&gt;.jar</span></span></code></pre></div><h2 id="启动客户端" tabindex="-1">启动客户端 <a class="header-anchor" href="#启动客户端" aria-label="Permalink to &quot;启动客户端&quot;">​</a></h2><p>拿你最喜欢的启动器启动客户端（一定要启动和你的服务端相同的版本啊），在「多人游戏」中单击「直接连接」，「服务器地址」输入 <code>localhost</code>，单击「加入服务器」即可进入服务器。</p><p><img src="https://s2.loli.net/2022/04/15/hBlogFdRup6v91N.png" alt="SERVER.png"></p><div class="tip custom-block"><p class="custom-block-title"><img src="data:image/svg+xml,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; viewBox=&#39;0 0 1028 1024&#39; transform=&#39;scale(0.6)&#39; fill=&#39;%23fff&#39;%3E%3Cpath d=&#39;M1018.319924 112.117535q4.093748 9.210934 6.652341 21.492179t2.558593 25.585928-5.117186 26.609365-16.374994 25.585928q-12.281245 12.281245-22.003898 21.492179t-16.886712 16.374994q-8.187497 8.187497-15.351557 14.32812l-191.382739-191.382739q12.281245-11.257808 29.167958-27.121083t28.144521-25.074209q14.32812-11.257808 29.679676-15.863275t30.191395-4.093748 28.656239 4.605467 24.050772 9.210934q21.492179 11.257808 47.589826 39.402329t40.425766 58.847634zM221.062416 611.554845q6.140623-6.140623 28.656239-29.167958t56.289041-56.80076l74.710909-74.710909 82.898406-82.898406 220.038979-220.038979 191.382739 192.406177-220.038979 220.038979-81.874969 82.898406q-40.937484 39.914047-73.687472 73.175753t-54.242167 54.753885-25.585928 24.562491q-10.234371 9.210934-23.539054 19.445305t-27.632802 16.374994q-14.32812 7.16406-41.960921 17.398431t-57.824197 19.957024-57.312478 16.886712-40.425766 9.210934q-27.632802 3.070311-36.843736-8.187497t-5.117186-37.867173q2.046874-14.32812 9.722653-41.449203t16.374994-56.289041 16.886712-53.730448 13.304682-33.773425q6.140623-14.32812 13.816401-26.097646t22.003898-26.097646z&#39;/%3E%3C/svg%3E" style="background-color:#057E3D;clip-path:circle();" width="24px" height="24px"> <strong>编者注</strong></p><p>有鉴于图床失效、原图丢失，上图系定稿后再行修补，图文未必贴合。</p></div><p><em>这不是我的正版 ID，这是我之前曾经用过的一个第三方验证账号，现在我的正版 ID 叫 「ThatRarityEG」……嗯，如果哪天你在哪个服务器遇到我了，记得打个招呼，毕竟，一路学习插件开发走过来也不容易——好啦，废话太多了！</em></p><p>试试移动，应该是移动不了的。</p><p>挖方块？可以挖开，但挖掉的瞬间就回来了。</p><p>输入指令登录：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-color-text);">/login 1234</span></span></code></pre></div><p><em>只是测试，密码随便选。</em></p><p><img src="https://s2.loli.net/2022/04/15/jXtZQgb3vfcpFd2.png" alt="SUCCESS.png"></p><p>看上去很正常，我们再来多测试几次。</p><p>退出后重进：</p><p><img src="https://s2.loli.net/2022/04/15/P9gXE4N6aubeshW.png" alt="LOGIN.png"></p><p>很正常，那如果我们再输一次：</p><p><img src="https://s2.loli.net/2022/04/15/h2gUNLGamnBY3DH.png" alt="AGAIN.png"></p><p>很不错，那输错密码呢？</p><p><img src="https://s2.loli.net/2022/04/15/nwugel6HVPomjsL.png" alt="WRONGPWD.png"></p><p>反正都很正常，心情大好。</p><p>如果没有正常运行，请检查：</p><ul><li><code>plugin.yml</code> 中的 <code>main</code> 是否写的是你的主类名？</li><li>哪里敲掉代码了？</li></ul><p>如果还无法解决，可以上 <a href="https://www.mcbbs.net/forum-development-1.html" target="_blank" rel="noreferrer">MCBBS 的编程开发版</a> 提问。</p><p>本次行动的源代码：<a href="https://github.com/Andy-K-Sparklight/PluginDiaryCode/tree/master/HarmonyAuth/src" target="_blank" rel="noreferrer">https://github.com/Andy-K-Sparklight/PluginDiaryCode/tree/master/HarmonyAuth/src</a></p><h2 id="行动总结" tabindex="-1">行动总结 <a class="header-anchor" href="#行动总结" aria-label="Permalink to &quot;行动总结&quot;">​</a></h2><p>在让你确认行动结束之前，我还需要说几件事。</p><ul><li><strong>不要把这个发布到 MCBBS</strong>！（我知道你不会但确实有人这样做过）</li><li><strong>这个插件仍有改进空间</strong>，玩家进入服务器时没有提示信息，明文存储密码，没有阻止玩家聊天，玩家可能在输密码时死掉，每次修改都要保存，性能太差，并且没法更改密码，这都是问题。你可以想想解决这些问题的方法，我们将在「HarmonyAuth SMART」中解决这些问题。</li><li><strong>你没有掌握本章内容</strong>，本章内容非常紧凑，你一定要多阅读几次，彻底弄明白每一行代码的作用。</li></ul><p>等你确认了这些，再单击下面的——</p><h2 id="行动结束" tabindex="-1">行动结束 <a class="header-anchor" href="#行动结束" aria-label="Permalink to &quot;行动结束&quot;">​</a></h2>`,43),r=s("p",null,[s("button",{type:"button",class:"btn-unconfirmed",style:{width:"100%",transition:"500ms"},onclick:"this.innerHTML=' ✓ 恭喜！';document.getElementById('hiddenEle').style.display = 'block';this.className='btn-confirmed';this.onclick=function(){};"}," ❔ 确认行动结束 ")],-1),p=s("div",{id:"hiddenEle",style:{display:"none"}},[s("blockquote",null,[s("p",null,"行动结果：完成")]),s("p",null,"恭喜！不管怎么说，这也是你的第一个实用型插件了！"),s("p",null,"听首歌吧~"),s("p",null,"（没有自动播放，我相信你，你会听的，对吧？）"),s("iframe",{frameborder:"no",border:"0",marginwidth:"0",marginheight:"0",width:"100%",height:"86",src:"//music.163.com/outchain/player?type=2&id=430297477&auto=0&height=66"}),s("p",null,"那么，我们第三章再见！")],-1),i=[t,r,p];function c(k,h,y,d,v,u){return n(),e("div",null,i)}const w=a(l,[["render",c]]);export{g as __pageData,w as default};
