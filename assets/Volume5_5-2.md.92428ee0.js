import{_ as s,o as a,c as o,S as n}from"./chunks/framework.7f03344f.js";const h=JSON.parse('{"title":"5-2 进度条","description":"","frontmatter":{},"headers":[],"relativePath":"Volume5/5-2.md","filePath":"docs/Volume5/5-2.md","lastUpdated":1698403164000}'),t={name:"Volume5/5-2.md"},e=n(`<h1 id="_5-2-进度条" tabindex="-1">5-2 进度条 <a class="header-anchor" href="#_5-2-进度条" aria-label="Permalink to &quot;5-2 进度条&quot;">​</a></h1><p>这一节的内容也相当简单。</p><p>虽然这一节叫做<strong>进度条</strong>，但我们指的是 BOSS 血条（<code>BossBar</code>），在抵御袭击，对抗末影龙，迎战凋灵时你都见到过。实际上这并不是它们的专利，<code>BossBar</code> 是一个很合适用于进度条的组件，适合用来编写 GUI。</p><p><code>BossBar</code> 和之前的配方一样，需要一个独特的 <code>NamespacedKey</code>。</p><p>进度条的创建和物品栏差不多：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-keyword);">BossBar</span><span style="color:var(--shiki-color-text);"> bossBar </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Bukkit</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">createBossBar</span><span style="color:var(--shiki-color-text);">(</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NamespacedKey(</span><span style="color:var(--shiki-token-keyword);">&lt;</span><span style="color:var(--shiki-token-function);">插件主类名</span><span style="color:var(--shiki-token-keyword);">&gt;</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-constant);">instance</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-token-function);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;a_interesting_bar&quot;</span><span style="color:var(--shiki-token-function);">)</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-string-expression);">&quot;标题&quot;</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">BarColor</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-constant);">PINK</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">BarStyle</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-constant);">SOLID</span><span style="color:var(--shiki-token-punctuation);">,</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">BarFlag</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-constant);">CREATE_FOG</span></span>
<span class="line"><span style="color:var(--shiki-color-text);">);</span></span></code></pre></div><ul><li>第一个是标题，和箱子 GUI 一样，可以通过标题识别进度条</li><li>第二个是颜色，只能使用 <code>BarColor</code> 中的颜色，可能的值包括 <code>PINK</code>、<code>BLUE</code>、<code>RED</code>、<code>GREEN</code>、<code>YELLOW</code>、<code>PURPLE</code> 以及 <code>WHITE</code></li><li>第三个是是否分段，只能取 <code>BarStyle</code> 中的值，可能的值包括 <code>SOLID</code>、<code>SEGMENTED_6</code>、<code>SEGMENTED_10</code>、<code>SEGMENTED_12</code>、<code>SEGMENTED_20</code></li><li>后面可以添加<strong>不止一个</strong> <code>BarFlag</code>，只能取 <code>BarFlag</code> 中的值。可以只写一个，也可以写全部，可能的值包括 <code>DARKEN_SKY</code>（天空昏暗）、<code>PLAY_BOSS_MUSIC</code>（播放 BOSS 音效）和 <code>CREATE_FOG</code>（创建迷雾）</li></ul><p>创建好 <code>BossBar</code> 后就可以向玩家显示：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-constant);">bossBar</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">addPlayer</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Objects</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">requireNonNull</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Bukkit</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">getPlayer</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;RarityEG&quot;</span><span style="color:var(--shiki-color-text);">)));</span></span></code></pre></div><p>这里用 <code>requireNonNull</code> 是因为 <code>getPlayer</code> 可能返回 <code>null</code>。</p><p>此外，我们还可以设置 <code>BossBar</code> 的进度：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-constant);">bossBar</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">setProgress</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0.8</span><span style="color:var(--shiki-color-text);">); </span><span style="color:var(--shiki-token-comment);">// 80%</span></span></code></pre></div><p>另外还可以用 <code>setVisible</code> 设置显示与否：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-constant);">bossBar</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">setVisible</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">false</span><span style="color:var(--shiki-color-text);">); </span><span style="color:var(--shiki-token-comment);">// false 隐藏，true 显示</span></span></code></pre></div><p>有时候你可能会想临时添加一些 <code>BarFlag</code>：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-constant);">bossBar</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">addFlag</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">BarFlag</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-constant);">PLAY_BOSS_MUSIC</span><span style="color:var(--shiki-color-text);">);</span></span>
<span class="line"><span style="color:var(--shiki-token-comment);">// 对应的 remove 方法</span></span>
<span class="line"><span style="color:var(--shiki-token-constant);">bossBar</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">removeFlag</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">BarFlag</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-constant);">PLAY_BOSS_MUSIC</span><span style="color:var(--shiki-color-text);">);</span></span></code></pre></div><p>可以使用 <code>setColor</code> 来改变颜色，这对于那些需要变色的进度条很有用：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-constant);">bossBar</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">setColor</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">BarColor</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-constant);">GREEN</span><span style="color:var(--shiki-color-text);">);</span></span></code></pre></div><p>不想继续向某个玩家显示：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-constant);">bossBar</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">removePlayer</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Objects</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">requireNonNull</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Bukkit</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">getPlayer</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;RarityEG&quot;</span><span style="color:var(--shiki-color-text);">)));</span></span></code></pre></div><p>重新设置标题，例如当需要显示数值时：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki css-variables"><code><span class="line"><span style="color:var(--shiki-token-constant);">bossBar</span><span style="color:var(--shiki-token-punctuation);">.</span><span style="color:var(--shiki-token-function);">setTitle</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;ThatRarityEG --- 85%&quot;</span><span style="color:var(--shiki-color-text);">);</span></span></code></pre></div><p>这里的每个 <code>setXXX</code> 方法都有对应的 <code>getXXX</code> 方法，这里就不列出了。</p><hr><p>很简单，对吧？但是，这些内容很有用。</p>`,25),l=[e];function c(i,r,p,k,v,y){return a(),o("div",null,l)}const u=s(t,[["render",c]]);export{h as __pageData,u as default};
